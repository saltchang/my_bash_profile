#!/bin/bash
# shellcheck disable=SC2034

# ==============================================================================

# File Name: .zshrc

# ------------------------------------------------------------------------------

# Description: ZSH configuration for macOS, Linux, and WSL

# ------------------------------------------------------------------------------

# Last Changed at: 2021-09-01 07:35 (UTC+8)

# ------------------------------------------------------------------------------

# Author: Salt Chang

# ------------------------------------------------------------------------------

# Author Email: me@saltchang.com

# ==============================================================================

# ===> Terminal Tab Title (Optional)============================================
# DISABLE_AUTO_TITLE="true"
# ==============================================================================

# ===> Language Configuration (Optional) =======================================
# ------------------------------------------------------------------------------
# -------> English (United States) ---------------------------------------------
# export LANG=en_US.UTF-8
# export LC_ALL=en_US.UTF-8
# ------------------------------------------------------------------------------
# -------> Traditional Chinese (Taiwan) ----------------------------------------
# -------> Run "sudo locale-gen zh_TW.UTF-8" to install the language pack ------
# export LANG=zh_TW.UTF-8
# export LC_ALL=zh_TW.UTF-8
# ==============================================================================

# ===> Powerlevel: Profile =====================================================
POWERLEVEL9K_MODE="nerdfont-complete"
ZSH_THEME="powerlevel10k/powerlevel10k"
# ==============================================================================

# ===> Powerlevel: Prompt Newline ==============================================
POWERLEVEL9K_PROMPT_ON_NEWLINE=true
POWERLEVEL9K_RPROMPT_ON_NEWLINE=true
POWERLEVEL9K_PROMPT_ADD_NEWLINE=true
# ==============================================================================

# ===> Powerlevel: Prompt Elements =============================================
POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(user host dir dir_writable newline vcs)
POWERLEVEL9K_RIGHT_PROMPT_ELEMENTS=(status root_indicator background_jobs history time os_icon)
# ==============================================================================

# ===> Powerlevel: Prompt Prefix (For macOS) ===================================
# POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX="\u2570\u2500\u27A4 "
# ==============================================================================

# ===> Powerlevel: Prompt Prefix (For Linux) ===================================
POWERLEVEL9K_MULTILINE_LAST_PROMPT_PREFIX="\u2570\u2500\u2B9E "
POWERLEVEL9K_MULTILINE_FIRST_PROMPT_PREFIX="\u256D\u2500"
# ==============================================================================

# ===> Powerlevel (For Linux) ==================================================
# -------> Segment -------------------------------------------------------------
POWERLEVEL9K_LEFT_SEGMENT_SEPARATOR=$'\uE0B0'
POWERLEVEL9K_RIGHT_SEGMENT_SEPARATOR=$'\uE0B2'

# -------> Icon ----------------------------------------------------------------
# POWERLEVEL9K_LINUX_ICON="\uF316" # For RedHat

# -------> Icon Color ----------------------------------------------------------
# POWERLEVEL9K_OS_ICON_FOREGROUND="204" # For Debian
POWERLEVEL9K_OS_ICON_FOREGROUND="202" # For Ubuntu
# POWERLEVEL9K_OS_ICON_FOREGROUND="197" # For Redhat
POWERLEVEL9K_OS_ICON_BACKGROUND="233"

# -------> Other ---------------------------------------------------------------
POWERLEVEL9K_TIME_BACKGROUND="179"
POWERLEVEL9K_TIME_FORMAT="%D{%H:%M}"

POWERLEVEL9K_DIR_FOREGROUND="017"
POWERLEVEL9K_DIR_BACKGROUND="116"

POWERLEVEL9K_USER_FOREGROUND="208"
POWERLEVEL9K_USER_BACKGROUND="229"

POWERLEVEL9K_STATUS_OK_FOREGROUND="156"
POWERLEVEL9K_STATUS_ERROR_FOREGROUND="160"
POWERLEVEL9K_STATUS_BACKGROUND="059"
POWERLEVEL9K_STATUS_HIDE_SIGNAME=true
POWERLEVEL9K_STATUS_SHOW_PIPESTATUS=false

POWERLEVEL9K_VCS_MODIFIED_BACKGROUND="208"
POWERLEVEL9K_VCS_BACKGROUND="078"
# ==============================================================================

# ===> Powerlevel (For macOS) ==================================================
# POWERLEVEL9K_OS_ICON_FOREGROUND="255"
# POWERLEVEL9K_TIME_FORMAT="%D{%H:%M}"
# ==============================================================================

# ===> Powerlevel: Other Config ================================================
POWERLEVEL9K_STATUS_CROSS=true
POWERLEVEL9K_STATUS_OK=true

plugins=(git)
# ==============================================================================

# ===> Proxy (Optional) ========================================================
# PROXY="http://proxy-web.company.com:80"
# NO_PROXY="localhost,127.0.0.1,.company.com"

# export PROXY=$PROXY
# export HTTP_PROXY=$PROXY
# export HTTPS_PROXY=$PROXY
# export ALL_PROXY=$PROXY
# export NO_PROXY=$NO_PROXY
# export proxy=$PROXY
# export http_proxy=$PROXY
# export https_proxy=$PROXY
# export all_proxy=$PROXY
# export no_proxy=$NO_PROXY
# ==============================================================================

# ===> CA Certificate (Optional) ===============================================
# CA_FILE="/usr/local/share/ca-certificates/certnew.crt"
# --------> For OpenSSL --------------------------------------------------------
# export SSL_CERT_FILE=$CA_FILE
# --------> For NodeJS ---------------------------------------------------------
# export NODE_EXTRA_CA_CERTS=$CA_FILE
# ==============================================================================

# ===> Oh-my-zsh ===============================================================
export ZSH="$HOME/.oh-my-zsh"
# shellcheck disable=SC1091
[ -s "$ZSH/oh-my-zsh.sh" ] && source "$ZSH/oh-my-zsh.sh"
# ==============================================================================

# ===> Base Directory of Projects ==============================================
PROJS_BASE=$HOME/projects
[ ! -d "$PROJS_BASE" ] && mkdir -p "$PROJS_BASE"
[ ! -d "$PROJS_BASE/work" ] && mkdir -p "$PROJS_BASE/work"
[ ! -d "$PROJS_BASE/personal" ] && mkdir -p "$PROJS_BASE/personal"
[ ! -d "$PROJS_BASE/lib" ] && mkdir -p "$PROJS_BASE/lib"
# ==============================================================================

# ===> Go Language (Optional) ==================================================
export GOPATH=$PROJS_BASE/go
[ ! -d "$GOPATH" ] && mkdir -p "$GOPATH"
# ==============================================================================

# ===> Path ====================================================================
# --------> Avoid repeated PATH statements -------------------------------------
addToPATH() {
    case ":$PATH:" in
    *":$1:"*) : ;;        # already there
    *) PATH="$1:$PATH" ;; # or PATH="$PATH:$1"
    esac
}
# --------> Basic Binary -------------------------------------------------------
addToPATH "$HOME/bin"
addToPATH "/usr/local/bin"
# --------> For Pyenv (Optional) -----------------------------------------------
# export PYENV_ROOT="$HOME/.pyenv"
# addToPATH "$PYENV_ROOT/bin:$PATH"
# eval "$(pyenv init --path)"
# eval "$(pyenv init -)"
# eval "$(pyenv virtualenv-init -)"
# --------> For Yarn (Optional) ------------------------------------------------
addToPATH "$HOME/.yarn/bin"
# --------> For Laravel (Optional) ---------------------------------------------
addToPATH "$HOME/.composer/vendor/bin"
# --------> Export PATH --------------------------------------------------------
export PATH
# ==============================================================================

# ===> Alias: Visual Studio Code - Insiders (Optional) =========================
unalias code 2>/dev/null
unalias codes 2>/dev/null
# Only if you need to use insiders version of vscode as default
# alias codes='/usr/local/bin/code' # for macOS or Linux
VSCODE_PATH="/mnt/c/Users/saltc/AppData/Local/Programs/Microsoft\ VS\ Code/bin/code" # for WSL
# shellcheck disable=SC2139
alias codes="$VSCODE_PATH" # for WSL
alias code='code-insiders'
# ==============================================================================

# ===> Alias: Edit =============================================================
# --------> Disable vi ---------------------------------------------------------
alias vi='vim'
# --------> Use VSCode ---------------------------------------------------------
alias edit='code'
# --------> Use Vim ------------------------------------------------------------
# alias edit='vim'
# ==============================================================================

# ===> Alias: Basic Command ====================================================
alias ls='echo && ls -hF --color=always'
alias ll='ls -l --time-style=long-iso --group-directories-first'
alias la='ll -a'
alias cp='cp -iv'
alias mv='mv -iv'
alias ln='ln -iv'
alias rm='rm -I -v --preserve-root'
alias chown='chown --preserve-root'
alias chmod='chmod --preserve-root'
alias chgrp='chgrp --preserve-root'
alias mkdir='mkdir -pv'
alias ssh='ssh -v -tt -A' # Use '-vvv' for top-level verbose
alias ping='ping -c 5'
# ==============================================================================

# ===> Functions: Shortcut =====================================================
cl() {
    cd "$1" && echo && la
}

home() {
    cl "$HOME"
    printf "\nWelcome home!\n"
}

goj() {
    cl "$PROJS_BASE"
    printf "\nOK, ready to do something amazing :)\n"
}

gow() {
    cl "$PROJS_BASE/work"
    printf "\nOK, ready to work :)\n"
}

gop() {
    cl "$PROJS_BASE/personal"
    printf "\nOK, ready to do something amazing :)\n"
}

gol() {
    cl "$PROJS_BASE/lib"
    printf "\nHere are the third-party libraries :)\n"
}

gog() {
    cl "$GOPATH"
    printf "\nOK, you are ready to Go :)\n"
}

# --------> Go to Windows Disk C (WSL Only) ------------------------------------
win() {
    cd "/mnt/c" || exit
    printf "\nOK, you are now in disk: C!\n"
}

# --------> Open with Windows Explorer (WSL Only) ------------------------------
open() {
    explorer.exe "$1"
}
# ==============================================================================

# ===> Alias: Shortcut =========================================================
alias c='clear'
alias edit-rc='edit $HOME/.zshrc'
alias source-rc='source $HOME/.zshrc'
alias paths='echo && echo -e ${PATH//:/\\n}'
# --------> List all ports -----------------------------------------------------
# Run "sudo apt-get install net-tools" to install net-tools if needed
alias ports='netstat -tulanp'
# ==============================================================================

# ===> Python (Optional) =======================================================
alias python='python3'
# ==============================================================================

# ===> Docker (Optional) =======================================================
alias docker-ls='docker ps -a --format "{{.Names}} ({{.ID}}): {{.Image}} ({{.Ports}})"'
alias docker-all='docker ps --format "{{.Names}} ({{.ID}}): {{.Image}} ({{.Ports}})"'
# ==============================================================================

# ===> NVM (Optional) ==========================================================
export NVM_DIR="$HOME/.nvm"
# --------> Load NVM -----------------------------------------------------------
# shellcheck disable=SC1091
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
# --------> Load NVM BASH_COMPLETION -------------------------------------------
# shellcheck disable=SC1091
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"
# ==============================================================================

# ===> Git (Optional) ==========================================================
# --------> Change Default Initial Branch --------------------------------------
git config --global init.defaultBranch main
# ==============================================================================

# ===> SSH Agent (Optional) ====================================================
SSH_KEY_FILE=$HOME/.ssh/id_rsa
eval "$(ssh-agent -s)"
ssh-add "$SSH_KEY_FILE"
# ==============================================================================

# ==============================================================================
# End of File
# ==============================================================================
